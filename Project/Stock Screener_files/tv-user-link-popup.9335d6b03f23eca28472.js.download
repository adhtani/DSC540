(window.webpackJsonp=window.webpackJsonp||[]).push([["tv-user-link-popup"],{"/CnV":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("mrSG"),i=n("q1tI"),o=n.n(i),s=n("mwqF"),a=n("0sCh"),u=o.a.memo((function(t){var e=t.children,n=t.onClick,u=t.disabled,l=Object(r.e)(t,["children","onClick","disabled"]),p=Object(i.useState)(!1),c=p[0],d=p[1],h=Object(a.a)();return o.a.createElement(s.b,Object(r.a)({disabled:c||u,onClick:function(){n&&(f(!0),n().then((function(){return f(!1)})).catch((function(){return f(!1)})))}},l),e);function f(t){h.current&&d(t)}}))},"/RHq":function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="16"><g fill="none" stroke="currentcolor"><path d="M9.52 10.226a5.5 5.5 0 1 0-6.983.048"/><path stroke-linecap="square" d="M4.5 14.4v.601c0 .276.216.499.495.499h2.01a.504.504 0 0 0 .495-.499V14.4m-5-4.9v3.51c0 .27.233.49.503.49h5.994a.494.494 0 0 0 .503-.49V9.5h-7z"/><path d="M3 11.5h6"/></g></svg>'},"0sCh":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("q1tI"),i=function(){var t=Object(r.useRef)(!1);return Object(r.useEffect)((function(){return t.current=!0,function(){t.current=!1}}),[]),t}},"6YWP":function(t,e,n){"use strict";var r,i;n.r(e),n.d(e,"Size",(function(){return r})),n.d(e,"StarFill",(function(){return i})),function(t){t.Small="small",t.Medium="medium",t.Large="large"}(r||(r={})),function(t){t.Full="full",t.Half="half",t.Empty="empty",t.Hidden="hidden"}(i||(i={}))},"9Oxe":function(t,e,n){"use strict";(function(t,e){var r=n("i8i4"),i=n("9uLv"),o=n("e45J").buildUtmQueryStringFromUrlParams,s=n("pN/T").template,a=n("QcGJ").openPMDialog,u=n("n2KA").renderBadgeAccount,l=n("LsFU").isTop,p=n("bbtx").isFeaturedBroker,c=n("EhHS").getBadgeAccountTitle,d=n("EhHS").getBadgeAccountName,h=n("HKz3").getBadgeAccountLink,f=n("6YWP").Size,m=n("pn3R").renderStarsRatingElement,v=n("9tJu").getUserProfilePath,g=n("u1Gt").renderDonationButton,_=n("u1Gt").renderFollowButton,b=n("u1Gt").renderMessageButton;!function(){var n,k=$(window),w=$(document);function T(){if(!t.enabled("disable_userlink_popup")){var e,r;n=this;var o=$.browser.msie||/\btrident\b/i.test(navigator.userAgent);w.on("mouseenter",".js-userlink-popup, .userlink, .ch-userlink, .ch-item-userpic",(function(){r&&clearTimeout(r);var t=$(this);r=setTimeout((function(){r=void 0,n.isActiveTarget(t)?n.open():e=$.ajax({url:"/u/"+(t.data("username")||t.text())+"/info/",type:"POST",cache:!o,success:function(e){if(e&&!e.error){t.is('[target="_blank"]')&&(e.hrefTarget="_blank"),n.update(t,e);var r=n.$el[0].querySelector(".js-follow-wrapper");null!==r&&_({container:r,isFollowed:n.data.follow_status,userId:n.data.id});var i=n.$el[0].querySelector(".js-message-wrapper");if(null!==i&&b({container:i,action:function(){runOrSignIn((function(){a(n.data.id,n.data.username)}),{source:"Private message from userlink popup",verifiedPhoneRequired:!0})}}),!e.is_broker){var o={id:e.id,username:e.username,avatars:{small:e.picture_url},is_broker:e.is_broker,badges:e.badges
},s=n.$el[0].querySelector(".js-donation-wrapper");null!==s&&g({container:s,donationUserInfo:o,donationKind:"profile_popup",action:function(){n.close()}})}var v=n.$el[0].querySelector(".js-badge-wrapper");if(null!==v){var k=e.badges.filter((function(t){return!(l(t.name)||p(t.name))}));if(k.length>0){var w=d(k);w&&u(v,{name:w,title:c(k),href:h(w)})}}if(e.broker_plan&&e.broker_rating){var $=n.$el[0].querySelector(".js-stars-rating-wrapper");m($,{rating:e.broker_rating,size:f.Medium}).then((function(){n.open()}))}else n.open()}}})}),parseInt(t.data("userlinkpopup-timeout"),10)||i.dur)})).on("mouseleave",".js-userlink-popup, .userlink, .ch-userlink, .ch-item-userpic",(function(){e&&e.abort(),r&&clearTimeout(r),n.close(200)}))}}Modernizr.mobiletouch||(T.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=void 0)},T.prototype.isInDOM=function(){return!!this.$el&&$.contains(document.body,this.$el[0])},T.prototype.getSizes=function(){if(!this.$el)return{width:0,height:0};var t=this.isInDOM(),e=this.$el.hasClass("i-hidden");this.$el.removeClass("i-hidden"),t||this.$el.css("position","fixed").appendTo(document.body);var n={width:this.$el.outerWidth(),height:this.$el.outerHeight()};return t||this.$el.css("position","").detach(),e&&this.$el.addClass("i-hidden"),n},T.prototype.sendMessage=function(){var t=this.$el.find('[name="message-text"]'),e=String(t.val()).replace(/^\s+|\s+$/g,"");e?(TradingView.messagesWidget.sendMessageToUser(e,this.data.id),this.close()):t.css("border-color","#E0735E").focus()},T.prototype.isActiveTarget=function(t){return this.$el&&this.$target&&this.$target.is(t)},T.prototype.isSameUser=function(t){var e=t.data();return e&&this.data&&e.id===this.data.id},T.prototype.update=function(t,n){if(this.isActiveTarget(t)||this.isSameUser(t))return this.clearCloseTimeout(),this;open&&this.close();var r=this;r.$target=t,r.data=n||t.data(),r.data.showButtons=r.data.username!==window.user.username&&!(r.data.banned_permanently||r.data.inactive),r.data.show_add_status_btn=!window.user.status&&is_authenticated,r.data.show_broker_rating_block=r.data.broker_plan&&r.data.broker_rating;var i=o(!1);r.data.profile_link=v({username:r.data.username,is_broker:r.data.is_broker},{query:i});var a=r.data.broker_rating&&r.data.broker_rating.toFixed(2);return r.$el=$(e.render(s,Object.assign({},r.data,{broker_rating:a}))).on("mouseenter",(function(){r.clearCloseTimeout()})).on("mouseleave",(function(t){r.close(r.lastDelay||500)})).on("click","a, .tv-button",(function(){r.close()})),r},T.prototype.open=function(){if(this.clearCloseTimeout(),this.opened||!this.$el)return this;var t=this.$target.closest(".js-userlink-popup-anchor"),e=this.$target[0].getBoundingClientRect(),n=t.length?t[0].getBoundingClientRect().left:e.left-20,r=this.getSizes();n+r.width>k.width()-10&&(n=k.width()-r.width-10);var o={top:e.top-r.height-5,left:n};o.top<0&&(o.top=e.top+this.$target.height()+5),this.$el.css(o).appendTo(document.body).removeClass("i-hidden").addClass("i-opening"),
this.$el.find(".js-status").width(this.$el.width());var s=this;return setTimeout((function(){s.$el.addClass("i-opened"),setTimeout((function(){s.$el.removeClass("i-opening")}),i.dur)}),20),this.opened=!0,this},T.prototype.close=function(t){if(t&&"number"==typeof t)return this.closeTimeout=setTimeout(this.close.bind(this),t),this.lastDelay=t,this;if(this.clearCloseTimeout(),!this.opened)return this;this.$el.addClass("i-closing");var e=this;return setTimeout((function(){e.$el&&(e._unmountComponentsAtNodes(),e.$el.remove()),e.$el=e.$target=e.data=void 0,e.opened=!1}),.5*i.dur),this},T.prototype.getPosition=function(){return!!this.$el&&{top:this.$el.offset().top-$(window).scrollTop(),left:this.$el.offset().left-$(window).scrollLeft()}},T.prototype._unmountComponentsAtNodes=function(){var t=this.$el[0].querySelector(".js-badge-wrapper");null!==t&&r.unmountComponentAtNode(t);var e=this.$el[0].querySelector(".js-stars-rating-wrapper");null!==e&&r.unmountComponentAtNode(e)},n=new T)}()}).call(this,n("Kxc7"),n("nbsC"))},HKz3:function(t,e,n){"use strict";n.r(e);var r=n("LsFU");var i=n("bbtx");function o(t){return Object(r.isBadgeUser)(t)?function(t){return Object(r.isModerator)(t)?"/house-rules/":Object(r.isTop)(t)?"/people/":Object(r.isProPremium)(t)||Object(r.isProRealtime)(t)||Object(r.isPro)(t)||Object(r.isTrial)(t)?"/gopro/?source=badge&feature="+t.split(":")[1]:void 0}(t):Object(i.isBadgeBroker)(t)?function(t){return Object(i.isBadgeBrokerWithLink)(t)?"/brokers/":void 0}(t):void 0}n.d(e,"getBadgeAccountLink",(function(){return o}))},TYzu:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 15" width="14" height="15"><path fill="none" stroke="currentcolor" stroke-linejoin="round" d="m.5 14.5a5 5 0 0 1 5-5h3a5 5 0 0 1 5 5zm6.5-7a1 1 0 0 1 0-7 1 1 0 0 1 0 7z"/></svg>'},"V14+":function(t,e,n){},e45J:function(t,e,n){"use strict";n.r(e),n.d(e,"UTM_PARAM_NAMES",(function(){return o})),n.d(e,"filterUtmInfo",(function(){return s})),n.d(e,"buildUtmQueryString",(function(){return a})),n.d(e,"buildUtmQueryStringFromUrlParams",(function(){return u}));var r=n("24R9"),i=n("25b6"),o=["utm_source","utm_medium","utm_campaign"];function s(t){var e={};return o.forEach((function(n){var r=t[n];"string"==typeof r&&""!==r&&(e[n]=Object(i.htmlEscape)(r))})),e}function a(t,e){void 0===e&&(e=!1);var n=Object(r.createUrlParams)(t);return n&&e?"?"+n:n}function u(t){return a(s(Object(r.getUrlParams)()),t)}},"o4+M":function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 15" width="13" height="15"><g fill="none"><path d="M-5-5h24v24H-5z"/><path stroke="currentcolor" stroke-linejoin="round" d="M.5 7.5h4v7h-4zm4-7h4v14h-4zm4 5h4v9h-4z"/></g></svg>'},"pN/T":function(t,e,n){"use strict";n.r(e),n.d(e,"template",(function(){return s}));n("YFKU")
;var r=n("TYzu"),i=n("/RHq"),o=n("o4+M"),s='<div class="tv-user-link-popup i-hidden" data-id="{{ id }}">\n\t\t<div class="tv-user-link-popup__general">\n\t\t\t<a href="{{ profile_link }}" class="tv-user-link-popup__avatar"{{#hrefTarget}} target="{{hrefTarget}}"{{/hrefTarget}}>\n\t\t\t\t<img src="{{mid_picture_url}}" alt="" class="tv-user-link-popup__avatar-img">\n\t\t\t</a>\n\t\t\t<div class="tv-user-link-popup__profile">\n\t\t\t\t<div class="tv-user-link-popup__name">\n\t\t\t\t\t<a href="{{ profile_link }}" class="tv-user-link-popup__name-link apply-overflow-tooltip"{{#hrefTarget}} target="{{hrefTarget}}"{{/hrefTarget}}>{{ username }}</a>\n\t\t\t\t\t<span class="tv-user-link-popup__badge-wrapper js-badge-wrapper"></span>\n\t\t\t\t</div>\n\t\t\t\t<div class="tv-user-link-popup__info">\n\t\t\t\t\t{{#show_broker_rating_block}}\n\t\t\t\t\t<span class="tv-user-link-popup__rating-number">{{ broker_rating }}</span>\n\t\t\t\t\t<span class="js-stars-rating-wrapper"></span>\n\t\t\t\t\t{{/show_broker_rating_block}}\n\t\t\t\t\t{{^broker_plan}}\n\t\t\t\t\t<span class="tv-user-link-popup__info-item tv-user-link-popup__info-item--users">\n\t\t\t\t\t\t<span class="tv-user-link-popup__info-icon apply-common-tooltip" title="'+window.t("Followers")+'">'+r+'</span>\n\t\t\t\t\t\t<span class="tv-user-link-popup__info-value apply-overflow-tooltip">{{ followers_count }}</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class="tv-user-link-popup__info-item tv-user-link-popup__info-item--comment">\n\t\t\t\t\t\t<span class="tv-user-link-popup__info-icon apply-common-tooltip" title="'+window.t("Ideas")+'">'+i+'</span>\n\t\t\t\t\t\t<span class="tv-user-link-popup__info-value apply-overflow-tooltip">{{ charts_count }}</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class="tv-user-link-popup__info-item tv-user-link-popup__info-item--chart">\n\t\t\t\t\t\t<span class="tv-user-link-popup__info-icon apply-common-tooltip" title="'+window.t("Reputation")+'">\n\t\t\t\t\t\t\t'+o+'</span>\n\t\t\t\t\t\t<span class="tv-user-link-popup__info-value apply-overflow-tooltip">{{ reputation }}</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t{{/broker_plan}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t{{#status}}\n\t\t\t<div class="tv-user-link-popup__status js-status">{{ status }}</div>\n\t\t{{/status}}\n\t\t{{#showButtons}}\n\t\t\t<div class="tv-user-link-popup__actions">\n\t\t\t\t<span class="tv-user-link-popup__button js-follow-wrapper"></span>\n\t\t\t\t<span class="tv-user-link-popup__button js-message-wrapper" data-username="{{ username }}" data-id="{{ id }}"></span>\n\t\t\t\t<span class="tv-user-link-popup__button js-donation-wrapper"></span>\n\t\t\t</div>\n\t\t{{/showButtons}}\n\t</div>'},pn3R:function(t,e,n){"use strict";function r(t,e){return Promise.all([n.e(202),n.e("stars-rating-element")]).then(n.bind(null,"SNgk")).then((function(n){return n.renderStarsRatingElementImpl(t,e)}))}n.r(e),n.d(e,"renderStarsRatingElement",(function(){return r}))},u1Gt:function(t,e,n){"use strict";n.r(e),n.d(e,"renderDonationButton",(function(){return c})),
n.d(e,"renderFollowButton",(function(){return d})),n.d(e,"renderMessageButton",(function(){return h}));var r=n("q1tI"),i=n.n(r),o=n("i8i4"),s=n.n(o),a=n("YFKU"),u=n("4Fgl"),l=n("Gx5W"),p=n("mwqF");function c(t){var e=t.container,n=t.donationUserInfo,r=t.action,o=t.donationKind,a=t.targetObjectId;s.a.render(i.a.createElement(u.a,{donationUserInfo:n,action:r,donationKind:o,targetObjectId:a}),e)}function d(t){var e=t.container,n=t.isFollowed,r=t.userId;s.a.render(i.a.createElement(l.a,{isFollowed:n,authorId:r,intent:"success",appearance:"stroke"}),e)}function h(t){var e=t.container,n=t.action;s.a.render(i.a.createElement(p.b,{intent:"primary",appearance:"stroke",onClick:n},a.t("Message")),e)}}}]);