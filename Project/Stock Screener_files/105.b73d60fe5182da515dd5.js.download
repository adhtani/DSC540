(window.webpackJsonp=window.webpackJsonp||[]).push([[105],{"9iCb":function(e,t,r){"use strict";r.r(t),r.d(t,"applyOverridesToStudy",(function(){return d})),r.d(t,"applyOverridesToStudyDefaults",(function(){return p}));var n,o,l=r("Eyy1"),i=r("23IT"),a=r("txPx"),s=Object(a.getLogger)("Chart.Model.StudyPropertiesOverrider");function u(e,t,r,l){var i=r.split(".");if(0!==i.length&&0!==i[0].length){var a,u,d=(a=i[0],{name:(u=a.split(":"))[0],type:2===u.length?u[1]:null}),p=d.name,y=d.type,f=null!==y,v=!f||"band"===y,g=!f||"area"===y,c=!f||"input"===y,h=!f||"plot"===y?o.getPlotIdByTitle(e,p):null,S=v?o.getBandIndexByName(e,p):null,P=g?o.getFilledAreaIdByTitle(e,p):null,w=c?o.getInputByName(e,p):null,b=t.hasOwnProperty(p);if((null!==h?1:0)+(null!==S?1:0)+(null!==P?1:0)+(null!==w?1:0)+(b?1:0)>1)s.logWarn("Study '"+e.description+"' has ambiguous identifier '"+p+"'");else{var L=i[1];if(null!==h){if(1===i.length)return void s.logWarn("Path of sub-property of '"+p+"' plot for study '"+e.description+"' must be not empty");var m=i.slice(1);n.applyPlotProperty(e,t,h,m,l)}else if(null!==w)n.applyInputValue(t,w,l);else if(null!==S){if(void 0===L)return void s.logWarn("Property name of '"+p+"' band for study '"+e.description+"' must be set");n.applyBandProperty(t,S,L,l)}else if(null!==P){if(void 0===L)return void s.logWarn("Property name of '"+p+"' area for study '"+e.description+"' must be set");n.applyFilledAreaProperty(t,P,L,l)}else b?n.setRootProperty(t,i,l):s.logWarn("Study '"+e.description+"' has no plot or input '"+p+"'")}}}function d(e,t){var r=e.properties(),n=r.state();for(var o in t)t.hasOwnProperty(o)&&u(e.metaInfo(),n,o,t[o]);r.mergeAndFire(n)}function p(e,t,r){for(var n in e)if(e.hasOwnProperty(n)){var l=n.indexOf(".");if(-1!==l){var i=n.substr(0,l),a=o.getMetaInfoByDescription(t,i);if(null!==a){var d=r(a);null!==d?u(a,d,n.substr(l+1),e[n]):s.logWarn("Cannot apply overrides for study "+i)}else s.logWarn("There is no such study "+i)}}}!function(e){var t={line:i.LineStudyPlotStyle.Line,histogram:i.LineStudyPlotStyle.Histogram,cross:i.LineStudyPlotStyle.Cross,area:i.LineStudyPlotStyle.Area,columns:i.LineStudyPlotStyle.Columns,circles:i.LineStudyPlotStyle.Circles,line_with_breaks:i.LineStudyPlotStyle.LineWithBreaks,area_with_breaks:i.LineStudyPlotStyle.AreaWithBreaks};e.applyPlotProperty=function(e,r,n,o,a){if(void 0!==r.styles){var u=o[0];if("color"!==u){var d=r.styles[n];if(void 0!==d&&d.hasOwnProperty(u)){if("plottype"===u){var p=t[String(a)];if(void 0===p)return void s.logWarn("Unsupported plot type for plot: "+a);a=p}d[u]=a}else s.logWarn("Study plot does not have property '"+u+"'")}else{!function(e,t,r,n,o){if(void 0!==e.styles)if(null===t&&!isNaN(n)&&n>0)s.logWarn("Study plot does not have color #"+n);else{if(0===n||isNaN(n))Object(l.ensureDefined)(e.styles[r]).color=String(o),n=0;null!==t&&(Object(l.ensureDefined)(t.colors[n]).color=String(o))}else s.logWarn("Study does not have styles")}(r,function(e,t,r){if(void 0===e.plots)return null;for(var n=0,o=e.plots;n<o.length;n++){var l=o[n]
;if(Object(i.isColorerPlot)(l)&&void 0!==t.palettes){var a=t.palettes[l.palette];if(l.target===r&&void 0!==a)return a}}return null}(e,r,n),n,o.length>1?parseInt(o[1]):NaN,a)}}else s.logWarn("Study does not have styles")},e.applyBandProperty=function(e,r,n,o){if(void 0!==e.bands){var l=e.bands[r];if(void 0!==l&&l.hasOwnProperty(n)){if("plottype"===n){var i=t[String(o)];if(void 0===i)return void s.logWarn("Unsupported plot type for band: "+o);o=i}l[n]=o}else s.logWarn("Study band does not have property '"+n+"'")}else s.logWarn("Study does not have bands")},e.applyFilledAreaProperty=function(e,t,r,n){if(void 0!==e.filledAreasStyle){var o=e.filledAreasStyle[t];void 0!==o&&o.hasOwnProperty(r)?o[r]=n:s.logWarn("Study area does not have property '"+r+"'")}else s.logWarn("Study does not have areas")},e.applyInputValue=function(e,t,r){void 0!==e.inputs&&e.inputs.hasOwnProperty(t)?e.inputs[t]=r:s.logWarn("Study does not have input '"+t+"'")},e.setRootProperty=function(e,t,r){if(0!==t.length){for(var n=e,o=0,l=t.slice(0,-1);o<l.length;o++){var i=l[o];if(null==n||!n.hasOwnProperty(i))break;n=n[i]}var a=t[t.length-1];null!=n&&n.hasOwnProperty(a)?n[a]=r:s.logWarn("Study does not have property "+t.join("."))}}}(n||(n={})),function(e){e.getInputByName=function(e,t){if(void 0===e.inputs)return null;t=t.toLowerCase();for(var r=0,n=e.inputs;r<n.length;r++){var o=n[r];if(o.name.toLowerCase()===t)return o.id}return null},e.getPlotIdByTitle=function(e,t){if(void 0===e.styles)return null;for(var r in t=t.toLowerCase(),e.styles){var n=e.styles[r];if((void 0!==n&&void 0!==n.title?n.title:r).toLowerCase()===t)return r}return null},e.getFilledAreaIdByTitle=function(e,t){if(void 0===e.filledAreas)return null;t=t.toLowerCase();for(var r=0,n=e.filledAreas;r<n.length;r++){var o=n[r];if(o.title.toLowerCase()===t)return o.id}return null},e.getBandIndexByName=function(e,t){if(void 0===e.bands)return null;t=t.toLowerCase();for(var r=0;r<e.bands.length;++r)if(e.bands[r].name.toLowerCase()===t)return r;return null},e.getMetaInfoByDescription=function(e,t){t=t.toLowerCase();for(var r=0,n=e;r<n.length;r++){var o=n[r];if(o.description.toLowerCase()===t||o.shortDescription.toLowerCase()===t)return o}return null}}(o||(o={}))}}]);