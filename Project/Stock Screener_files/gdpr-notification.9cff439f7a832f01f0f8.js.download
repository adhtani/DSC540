(window.webpackJsonp=window.webpackJsonp||[]).push([["gdpr-notification"],{"kRh/":function(i,o,t){"use strict";t.r(o),t.d(o,"GdprNotification",(function(){return c}));t("bSeV");var e=t("BHQF"),n=t("FBuY"),c=function(){function i(){var i=this;this._dialog=null,this._promise=null,this._showDialog=function(o){i._dialog||(i._dialog=o,o.on("action:accept",i._onAccept),o.open())},this._closeDialog=function(){i._dialog&&(i._dialog.close(),i._dialog=null)},this._onAccept=function(){Object(e.fetch)("/accept_policy/",{credentials:"include",method:"POST"}).then(i._onSuccess,i._closeDialog)},this._onSuccess=function(){i._closeDialog(),n.TVXWindowEvents.emit("acceptPolicy")},this._subscribe()}return i.prototype.showIfNotAccepted=function(){var i=window.user,o=window.is_authenticated,t="/privacy-policy/"!==window.location.pathname,e=new Date(2018,4,17),n=(i.date_joined?new Date(i.date_joined):new Date)<e&&!i.is_policy_accepted;o&&t&&n&&this._loadDialog().then(this._showDialog)},i.prototype._loadDialog=function(){return this._promise||(this._promise=new Promise((function(i){Promise.all([t.e("dialogs-core"),t.e(11),t.e(18),t.e(26),t.e(30),t.e("gdpr-notification-dialog")]).then(function(o){var e=t("MuAU").createGdprNotificationDialog;i(e())}.bind(null,t)).catch(void 0)}))),this._promise},i.prototype._subscribe=function(){window.loginStateChange.subscribe(this,this.showIfNotAccepted),n.TVXWindowEvents.on("acceptPolicy",this._closeDialog)},i}()}}]);