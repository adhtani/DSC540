(window.webpackJsonp=window.webpackJsonp||[]).push([[180],{"6q77":function(t,e,o){"use strict";o.d(e,"a",(function(){return n})),o.d(e,"b",(function(){return i}));var n,i,s=o("j+67"),r=o("Vdly");!function(t){t.getDefaultColor=function(){return r.getValue("default_symbol_marker_color",s.b.Red)},t.setDefaultColor=function(t){r.setValue("default_symbol_marker_color",t,{forceFlush:!0})}}(n||(n={})),function(t){t.getDefaultColor=function(){return r.getValue("default_symbols_filter_color",s.b.Red)},t.setDefaultColor=function(t){r.setValue("default_symbols_filter_color",t,{forceFlush:!0})},t.setIsActive=function(t){r.setValue("marked_symbols_filter",t,{forceFlush:!0})},t.getIsActive=function(){return r.getBool("marked_symbols_filter",!1)}}(i||(i={}))},Ke6I:function(t,e,o){"use strict";o.d(e,"a",(function(){return n})),o.d(e,"b",(function(){return l}));var n,i=o("j+67"),s=o("6q77"),r=o("lnbc");!function(t){t[t.SymbolMarker=0]="SymbolMarker",t[t.ScreenerFilter=1]="ScreenerFilter"}(n||(n={}));var l=function(){function t(t){this._context=t.context}return t.prototype.getColor=function(){switch(this._context){case n.SymbolMarker:return this._getAvailableColor(s.a.getDefaultColor());case n.ScreenerFilter:return this._getAvailableColor(s.b.getDefaultColor())}},t.prototype.setColor=function(t){switch(this._context){case n.SymbolMarker:s.a.setDefaultColor(this._getAvailableColor(t));break;case n.ScreenerFilter:s.b.setDefaultColor(this._getAvailableColor(t))}},t.prototype._getAvailableColor=function(t){return Object(r.b)(t)?t:(this.setColor(i.b.Red),i.b.Red)},t}()},M4p8:function(t,e,o){"use strict";o.d(e,"a",(function(){return a}));var n=o("j+67"),i=(o("EsMY"),o("gWrr")),s=o("T6Dw"),r=o("TSYQ"),l=o("xKng"),a=function(){function t(t){var e=this;this._onClick=function(t){e._opts.onClick&&e._opts.onClick(t)},this._onDblClick=function(t){e._opts.onDblClick&&e._opts.onDblClick(t)},this._container=t.container,this._opts=t,this._elem=this._render(t),this._addEventListeners()}return t.prototype.setColor=function(t){this.removeColor(),this._elem.classList.add(l[t])},t.prototype.removeColor=function(){this._elem.classList.remove(l[n.b.Red],l[n.b.Orange],l[n.b.Purple],l[n.b.Green],l[n.b.Blue])},t.prototype.addClass=function(t){this._elem.classList.add(t)},t.prototype.removeClass=function(t){this._elem.classList.remove(t)},t.prototype.getElem=function(){return this._elem},t.prototype.appendTo=function(t){this.detach(),this._container=t,this._container.appendChild(this._elem),this._addEventListeners()},t.prototype.detach=function(){this._removeEventListeners(),this._container&&(this._container.removeChild(this._elem),delete this._container)},t.prototype._render=function(t){var e,o=r(l.uiMarker,((e={})[t.className]=Boolean(t.className),e[l[t.color]]=Boolean(t.color),e)),n=t.specialImage||s,a=Object(i.parseHtmlElement)('<div class="'+o+'">'+n+"</div>");if(!a)throw new Error("Can't parse html");return this._container&&this._container.appendChild(a),a},t.prototype._addEventListeners=function(){var t=Modernizr.mobiletouch?"touchstart":"click"
;this._elem.addEventListener(t,this._onClick),this._opts.onDblClick&&this._elem.addEventListener("dblclick",this._onDblClick)},t.prototype._removeEventListeners=function(){var t=Modernizr.mobiletouch?"touchstart":"click";this._elem.removeEventListener(t,this._onClick),this._opts.onDblClick&&this._elem.removeEventListener("dblclick",this._onDblClick)},t}()},T6Dw:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 12" width="14" height="12" fill="currentColor" focusable="false" preserveAspectRatio="none"><path d="M14 12l-4-6 4-6H0v12z"/></svg>'},fFbJ:function(t,e,o){"use strict";o.d(e,"a",(function(){return a})),o.d(e,"b",(function(){return h}));var n=o("mrSG"),i=(o("YFKU"),o("HbRj"),o("M4p8")),s=o("tEuG"),r=o("+9Gp"),l=o("Ke6I"),a=function(){function t(t){var e=this;this._service=Object(s.a)(),this._colorManager=new l.b({context:l.a.SymbolMarker}),this._onClick=function(t){t.preventDefault();var o=function(){if(null===e._color){var t=e._colorManager.getColor();r.PopupColorSelector.show({elem:e._uimarker.getElem(),currentColor:t,onSelectColor:e._onSelectColor}),e._service.setSymbolsColor([e._symbol],t)}else r.PopupColorSelector.hide(),e._service.setSymbolsColor([e._symbol],null)};window.runOrSignIn((function(){e._opts.onClick?e._opts.onClick(e._symbol,o):o()}),{source:"Set symbol color"})},this._onSelectColor=function(t){e._colorManager.setColor(t),e._service.setSymbolsColor([e._symbol],e._colorManager.getColor())},this._onDblClick=function(t){t.preventDefault()},this._onChange=function(){e._setState(e._service.getSymbolColor(e._symbol))},this._opts=t,this._symbol=t.symbol,this._color=t.color||this._service.getSymbolColor(this._symbol),this._uimarker=new i.a({color:this._color,container:t.container,className:t.className,onClick:this._onClick,onDblClick:this._onDblClick,specialImage:t.specialImage}),null!==this._color&&this._addActiveClassName(),this._service.onSymbolChange(this._symbol,this._onChange)}return t.prototype.updateSubscription=function(){this._setState(this._service.getSymbolColor(this._symbol))},t.prototype.bindTo=function(t,e){this._service.offSymbolChange(this._symbol,this._onChange),this._symbol=t,this._uimarker.appendTo(e),this._setState(this._service.getSymbolColor(t)),this._service.onSymbolChange(t,this._onChange)},t.prototype.unbind=function(){this._service.offSymbolChange(this._symbol,this._onChange),this._uimarker.detach()},t.prototype.getElem=function(){return this._uimarker.getElem()},t.prototype.isMarked=function(){return null!==this._color},t.prototype.destroy=function(){this.unbind(),delete this._uimarker,delete this._opts},t.prototype._setState=function(t){var e=this.isMarked();this._color=t,null!==this._color?(this._uimarker.setColor(this._color),this._addActiveClassName()):(this._uimarker.removeColor(),this._removeActiveClassName()),void 0!==this._opts.onMarkedChanged&&e!==this.isMarked()&&this._opts.onMarkedChanged()},t.prototype._addActiveClassName=function(){this._opts.activeClassName&&this._uimarker.addClass(this._opts.activeClassName)},
t.prototype._removeActiveClassName=function(){this._opts.activeClassName&&this._uimarker.removeClass(this._opts.activeClassName)},t}(),c=function(t){function e(e){var o=t.call(this,e)||this;return o._onInit=function(){o.updateSubscription()},o._service.onInit(o._onInit),o}return Object(n.c)(e,t),e.prototype.destroy=function(){this._service.offInit(this._onInit),t.prototype.destroy.call(this)},e}(a);function h(t){return new c(t)}},tEuG:function(t,e,o){"use strict";o.d(e,"a",(function(){return f}));o("bSeV");var n=o("j+67"),i=o("YFKU"),s=o("lnbc"),r=o("brCa"),l=o("SGSq"),a=o("+GxX"),c=function(){function t(t){var e=this;this._symbolChangeHandlers=new Map,this._listChangeHandlers=[],this._initHandlers=[],this._sync=null,this._inited=!1,this._handleChange=function(t,o){if(t.lists!==o.lists){e._listChangeHandlers.forEach((function(e){try{e(t,o)}catch(r){}}));for(var i=function(e,i){var s=Object(n.g)(t,e),l=Object(n.g)(o,e);s!==l&&i.forEach((function(t){try{t(s,l)}catch(r){}}))},s=0,r=Array.from(e._symbolChangeHandlers.entries());s<r.length;s++){var l=r[s];i(l[0],l[1])}}},this._onLoginStateChange=function(){var t;e._model.closeConnection(),window.is_authenticated?(e._model.connect(),t=e._syncSymbols()):(e._model.anonymize(),e._inited=!1,t=Promise.resolve()),t.then(e._fireInit)},this._fireInit=function(){e._initHandlers.forEach((function(t){return t()}))},this._runWithSync=function(t){e._sync?e._sync.then(t):t()},this._model=new s.a({api:t?t.api:void 0,quoteSession:t?t.quoteSession:void 0,onChange:this._handleChange,limit:null==t?void 0:t.limit,onLimit:u,colors:null==t?void 0:t.colors}),a.FeatureToggle.onFeaturesStateChanged().subscribe(this,(function(){e._model.activateSeparators(Object(l.a)())})),this._subscribeLoginStateChange(),this._syncSymbols().then(this._fireInit)}return t.prototype.getSymbolsByColor=function(t){return this._model.getSymbolsByColor(t)},t.prototype.setSymbolsColor=function(t,e){var o=this;0!==t.length&&this._runWithSync((function(){o._model.setSymbolsColor(t,e)}))},t.prototype.getSymbolColor=function(t){return this._model.getSymbolColor(t)},t.prototype.markMany=function(t){var e=this;this._runWithSync((function(){e._model.markMany(t)}))},t.prototype.clearAllSymbolsColor=function(){var t=this;this._runWithSync((function(){t._model.clearAllSymbolsColor()}))},t.prototype.onSymbolChange=function(t,e){var o=this._symbolChangeHandlers.get(t);o?o.push(e):this._symbolChangeHandlers.set(t,[e])},t.prototype.offSymbolChange=function(t,e){var o=this._symbolChangeHandlers.get(t);if(o){var n=o.filter((function(t){return t!==e}));n.length>0?this._symbolChangeHandlers.set(t,n):this._symbolChangeHandlers.delete(t)}},t.prototype.onListChange=function(t){this._listChangeHandlers.push(t)},t.prototype.offListChange=function(t){this._listChangeHandlers=this._listChangeHandlers.filter((function(e){return e!==t}))},t.prototype.onInit=function(t){this._initHandlers.push(t)},t.prototype.offInit=function(t){this._initHandlers=this._initHandlers.filter((function(e){return e!==t}))},t.prototype.destroy=function(){
a.FeatureToggle.onFeaturesStateChanged().unsubscribeAll(this),this._model.closeConnection(),this._unsubscribeLoginStateChange()},t.prototype.isInited=function(){return this._inited},t.prototype._subscribeLoginStateChange=function(){window.loginStateChange&&window.loginStateChange.subscribe(this,this._onLoginStateChange)},t.prototype._unsubscribeLoginStateChange=function(){window.loginStateChange&&window.loginStateChange.unsubscribe(this,this._onLoginStateChange)},t.prototype._syncSymbols=function(){var t=this;if(window.is_authenticated){this._sync=this._model.syncSymbols();var e=function(){t._sync=null,t._inited=!0};return this._sync.then(e).catch(e)}return Promise.resolve()},t}(),h=null;function u(){h||(h=Object(r.createNoticeDialog)({title:i.t("Issue With Flagging"),content:i.t("Unable to flag all selected symbols since it exceeds the maximum amount ({limit}).").format({limit:String(s.d)})})).then((function(t){t.on("afterClose",(function(){h=null})),t.open()}))}var _=null;function f(){return null===_&&(_=new c),_}},xKng:function(t,e,o){t.exports={wrap:"wrap-2z20-nH3",uiMarker:"uiMarker-2qpL8Ijj",red:"red-2a0ReNmJ",orange:"orange-3IplkooM",green:"green-3mNs5pli",purple:"purple-AQtjbULM",blue:"blue-rY6kAKBw",uiMarker__small:"uiMarker__small-1LSfKnWQ"}}}]);