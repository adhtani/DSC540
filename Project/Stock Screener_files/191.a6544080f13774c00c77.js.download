(window.webpackJsonp=window.webpackJsonp||[]).push([[191],{WqyU:function(e,n,r){(function(e){var n;"undefined"!=typeof window&&(n=window.TVScript=window.TVScript||{}),(n=n||{}).Access={},n.Access.ACCESS_OPEN_NO_AUTH="open_no_auth",n.Access.ACCESS_CLOSED_NO_AUTH="closed_no_auth",n.Access.ACCESS_CLOSED_NEEDS_AUTH="closed_needs_auth",n.Access.MAP_ID_TO_NAME={1:n.Access.ACCESS_OPEN_NO_AUTH,2:n.Access.ACCESS_CLOSED_NO_AUTH,3:n.Access.ACCESS_CLOSED_NEEDS_AUTH},n.Access.MAP_NAME_TO_ID={},Object.keys(n.Access.MAP_ID_TO_NAME).forEach((function(e){n.Access.MAP_NAME_TO_ID[n.Access.MAP_ID_TO_NAME[e]]=e})),n.Kinds={},n.Kinds.STUDY="study",n.Kinds.STRATEGY="strategy",n.PinePrefix={},n.PinePrefix.USER="USER;",n.PinePrefix.PUB="PUB;",n.PinePrefix.STD="STD;",n.PinePrefix.TV="TV_",n.PinePrefix.EDGR="EDGR_",n.PineType={},n.PineType.UserSaved="PineType_UserSaved",n.PineType.UserPublished="PineType_UserPublished",n.PineType.BuiltIn="PineType_BuiltIn",n.PineType.Addon="PineType_Addon",n.Type=n.Type||function(){},n.Type.VOID="void",n.Type.INTEGER="integer",n.Type.FLOAT="float",n.Type.STRING="string",n.Type.BOOL="bool",n.Type.COLOR="color",n.Type.SERIES="series",n.Type.PLOT="plot",n.Type.HLINE="hline",n.Type.BARCOLOR="barcolor",n.Type.BGCOLOR="bgcolor",n.Type.PLOTSHAPES="plotshape",n.Type.PLOTCHARS="plotchar",n.Type.PLOTARROWS="plotarrow",n.Type.NA="na",n.Type.ARRAY="array",n.TranslatorDefaultVersion=1,n.TranslatorReferenceVersioningIntroduced=4,n.TranslatorLastVersion=4,n.pineType=function(e){return e.startsWith(n.PinePrefix.USER)?n.PineType.UserSaved:e.startsWith(n.PinePrefix.PUB)?n.PineType.UserPublished:e.startsWith(n.PinePrefix.STD)||e.startsWith(n.PinePrefix.TV)||e.startsWith(n.PinePrefix.EDGR)?n.PineType.BuiltIn:n.PineType.Addon},n.patchILTemplate=function(e,r,t){var i=t||{};return n._patchTemplate(/<(in_\d+)>/g,e,r,i)},n.decorateQuotes=function(e){if(!e)return e;var n=/([^\\']+?)(')[^']*?/g,r=e;return"'"==r.charAt(0)&&"'"==r.charAt(r.length-1)?"'"+(r=r.substr(1,r.length-2)).replace(n,"$1\\$2")+"'":r.replace(n,"$1\\$2")},n.patchInputs=function(e,n){var r={};for(var t in e)if(e.hasOwnProperty(t)){var i,s=e[t];i=s.isFake?{v:n[s.id],f:!0,t:s.type}:n[s.id],r[s.id]=i}return r},n._patchTemplate=function(e,r,t,i){var s=i||{};return r.replace(e,(function(e,r){for(var i=(r in s?s[r]:t.defaults.inputs[r]),a=0;a<t.inputs.length;++a)if(t.inputs[a].id===r)if("bool"===t.inputs[a].type)i=i?"1.0":"0.0";else if(["text","symbol","resolution","session"].indexOf(t.inputs[a].type)>=0)i="'"+n.decorateQuotes(i)+"'";else if("source"===t.inputs[a].type){var o=i.split("$");o[0]="'"+o[0]+"'",i="source("+o.join(",")+")"}return i}))},n.isStrategy=function(e){return/^\s*strategy\s*\(/m.test(e)};var r=/^\/\/\s*?@version\s*?=\s*?(\S*?)\s*?$/gm,t=/^[0-9]+$/;n.extractVersion=function(e){r.lastIndex=0;var i=r.exec(e);if(null===i)return n.TranslatorDefaultVersion;var s=i[1],a=t.test(s)?Number(s):NaN;return isNaN(a)?n.TranslatorDefaultVersion:a},e&&e.exports&&(e.exports=n)}).call(this,r("YuTi")(e))},nmnj:function(e,n,r){"use strict";(function(n){
var t=r("Eyy1").assert,i=r("JWMC").trackEvent,s=r("FBuY").TVXWindowEvents,a=r("txPx").getLogger("Pine.ScriptLib"),o=r("xlbu").telemetry,c={fast:["delete","get","is_auth_to_get","is_auth_to_write","parse_title","rename"],medium:["list","eval_pine_ex"],slow:["process_legacy","publish","save","translate","translate_source","gen_alert"]};var u={};function l(){u._cache={}}u._isAuthCache=new l,u._pineDeleted=new n,s.on("TVScriptModified",(function(e){u.clearSavedScriptsCache(),u.scriptUpdater()&&u.scriptUpdater().onTVScriptModified(JSON.parse(e))})),s.on("TVScriptDeleted",(function(e){u.clearAllCaches(),u.scriptUpdater()&&u.scriptUpdater().onTVScriptDeleted(JSON.parse(e))})),s.on("TVScriptRenamed",(function(e){u.clearSavedScriptsCache(),u.scriptUpdater()&&u.scriptUpdater().onTVScriptRenamed(JSON.parse(e))})),s.on("TVScriptLegacyPineProcessed",(function(e){u.clearSavedScriptsCache(),u.scriptUpdater()&&u.scriptUpdater().onTVScriptLegacyPineProcessed(JSON.parse(e))})),u.PINE_FACADE_URL=function(){return window.PINE_URL},u.onPineDeleted=function(){return u._pineDeleted},u._pineFacadeAjax=function(e,n,r,t){a.logNormal("Requesting pine facade scripts, url: "+n);var i=function(e,n){for(var r=Object.keys(c),t=0;t<r.length;t++){var i=c[r[t]].filter((function(n){return-1!==e.indexOf(n)}));if(Boolean(i.length))return r[t]}return!1}(n),s=Date.now(),l=t?void 0:{withCredentials:!0};return $.ajax({url:u.PINE_FACADE_URL()+n,type:e,data:r||{},dataType:"json",xhrFields:l}).done((function(){var e=Date.now()-s;o.sendReport("pine",i+"_group_time_frame",{value:e}),o.sendReport("pine",i+"_group_ok"),a.logNormal("Requesting pine facade scripts finished, url: "+n)})).fail((function(){var e=Date.now()-s;o.sendReport("pine",i+"_group_time_frame",{value:e}),o.sendReport("pine",i+"_group_error"),a.logError("Requesting pine facade scripts failed, url: "+n)}))},u.convertScript=function(e){var n=$.Deferred(),r={source:e,version_to:4};return u._pineFacadeAjax("POST","/convert/",r).done((function(e,r,t){e.error?n.reject(u._readableError(e.error)):n.resolve(e)})).fail((function(e,r,t){u._anyRequestAsyncFail(n,e)})),n.promise()},u.translateScriptAsync=function(e,n,r,t){i("Pine","ScriptLib.translateScript"),t=!!t;var s=$.Deferred(),a="/translate_source/"+encodeURIComponent(n)+"/?is_pine_ex="+t,o={user_name:window.user&&window.user.username,source:e,inputs:JSON.stringify(r||{})};return u._pineFacadeAjax("POST",a,o).done((function(e,n,r){u._translateScriptAsyncDone(s,e)})).fail((function(e,n,r){u._anyRequestAsyncFail(s,e)})),s.promise()},u.translateScriptAsync2=function(e,n){a.logNormal("translateScriptAsync2, pineId="+e+" pineVersion="+n),i("Pine","ScriptLib.translateScript");var r=$.Deferred(),t=0!==e.indexOf("USER"),o=window.user&&window.user.username,c="?user_name="+encodeURIComponent(o),l="/translate/"+encodeURIComponent(e)+"/"+n+"/";return t||null==o||(l+=c),u._pineFacadeAjax("GET",l,void 0,t).done((function(e,t,i){if(u._translateScriptAsyncDone(r,e),n<0){u.clearSavedScriptsCache();var a={scriptMetaInfo:e.result.metaInfo}
;s.emit("TVScriptLegacyPineProcessed",JSON.stringify(a)),setTimeout((function(){a.isSelfCall=!0,null!=u.scriptUpdater()&&u.scriptUpdater().onTVScriptLegacyPineProcessed(a)}),0)}})).fail((function(e,n,t){u._anyRequestAsyncFail(r,e)})),r.promise()},u._translateScriptAsyncDone=function(e,n){if(n.error)e.reject(u._readableError(n.error));else if(n.success)e.resolve(n.result.metaInfo,n.result.IL);else{var r=n.result?n.result.metaInfo:null;e.reject(n.reason,r)}},u._saveScriptAsyncDone=function(e,n){if(n.error)e.reject(u._readableError(n.error));else if(n.success)e.resolve(n.result.metaInfo);else{var r=n.result?n.result.metaInfo:null;e.resolve(r,n.reason)}},u._generateAlertAsyncDone=function(e,n){if(n.error)e.reject(u._readableError(n.error));else if(n.success)e.resolve(n.result.metaInfo,n.result.IL,n.result.inputs||null);else{var r=n.result?n.result.metaInfo:null;e.reject(n.reason,r)}},u._readableError=function(e,n){return n},u._anyRequestAsyncFail=function(e,n){0===u.PINE_FACADE_URL().indexOf("http")&&a.logError(n.responseText),e.reject(u._readableError(n.status,n.statusText))},u.isAuthToWritePineScript=function(e){var n="write_"+e,r=u._isAuthCache.getPromise(n);if(null!==r)return r;i("Pine","ScriptLib.isAuthToWritePineScript");var t=$.Deferred(),s="/is_auth_to_write/"+encodeURIComponent(e);return u._pineFacadeAjax("GET",s).done((function(e,n,r){t.resolve(e)})).fail((function(e,n,r){u._anyRequestAsyncFail(t,e)})),u._isAuthCache.setPromise(n,t.promise())},u.isAuthToGetPineSourceCode=function(e,n){var r="get_"+e+"_"+n,t=u._isAuthCache.getPromise(r);if(null!==t)return t;i("Pine","ScriptLib.isAuthToGetPineSourceCode");var s=$.Deferred(),a="/is_auth_to_get/"+encodeURIComponent(e)+"/"+n;return u._pineFacadeAjax("GET",a).done((function(e,n,r){s.resolve(e)})).fail((function(e,n,r){u._anyRequestAsyncFail(s,e)})),u._isAuthCache.setPromise(r,s.promise())},l.prototype.getPromise=function(e){var n=u._cache[e];return void 0===n?null:void 0!==n.value?$.Deferred().resolve(n.value):void 0!==n.promise?n.promise:null},l.prototype.setPromise=function(e,n){return u._cache[e]={promise:n},n.done((function(n){u._cache[e]={value:n}})).fail((function(n){delete u._cache[e]})),n},u.getPineSourceCode=function(e,n,r){i("Pine","ScriptLib.getPineSourceCode");var t=$.Deferred(),s="?no_4xx="+!!r,a="/get/"+encodeURIComponent(e)+"/"+n+s;return u._pineFacadeAjax("GET",a).done((function(e,n,r){!1===e.success?t.reject(e.reason):t.resolve(e)})).fail((function(e,n,r){u._anyRequestAsyncFail(t,e)})),t.promise()},u.saveNewDraft=function(e){i("Pine","ScriptLib.saveNewDraft");var n=$.Deferred();if(null==e||""===e)return n.reject($.t("Cannot save empty source code"));var r=window.user&&window.user.username,t="/save/new_draft/?user_name="+encodeURIComponent(r)+"&allow_use_existing_draft=true",s={source:e};return u._pineFacadeAjax("POST",t,s).done((function(e,r,t){u._translateScriptAsyncDone(n,e)})).fail((function(e,r,t){u._anyRequestAsyncFail(n,e)})),n.promise()},u.saveNextDraft=function(e,n,r){i("Pine","ScriptLib.saveNextDraft");var t=$.Deferred()
;if(null==n||""===n)return t.reject($.t("Cannot save empty source code"));var s=window.user&&window.user.username,a=(r=!!r,"/save/next_draft/"+encodeURIComponent(e)+"/?user_name="+encodeURIComponent(s)+"&allow_create_new="+r),o={source:n};return u._pineFacadeAjax("POST",a,o).done((function(e,n,r){u._translateScriptAsyncDone(t,e)})).fail((function(e,n,r){u._anyRequestAsyncFail(t,e)})),t.promise()},u.processLegacy=function(e,n){i("Pine","ScriptLib.processLegacy");var r=$.Deferred(),t=window.user&&window.user.username,s="/process_legacy/"+encodeURIComponent(e)+"/?user_name="+encodeURIComponent(t),a={};return null!=n&&""!==n&&(a.source=n),u._pineFacadeAjax("POST",s,a).done((function(e,n,t){u._translateScriptAsyncDone(r,e)})).fail((function(e,n,t){u._anyRequestAsyncFail(r,e)})),r.promise()},u.generateAlert=function(e){i("Pine","ScriptLib.generateAlert");var n=$.Deferred(),r=window.user&&window.user.username,t="/gen_alert/?user_name="+encodeURIComponent(r),s={alert_info:e},a=Date.now();return u._pineFacadeAjax("POST",t,s).done((function(e,r,t){o.sendReport("alerts","compilation_ok"),u._generateAlertAsyncDone(n,e)})).fail((function(e,r,t){o.sendReport("alerts","compilation_error"),u._anyRequestAsyncFail(n,e)})).always((function(){var e=Date.now()-a;o.sendReport("alerts","compilation_time_frame",{value:e})})),n.promise()},u.parseScriptTitleAsync=function(e){i("Pine","ScriptLib.parseScriptTitle");var n=$.Deferred();if(null==e||""===e)return n.reject($.t("Cannot save empty source code"));var r={user_name:window.user&&window.user.username,source:e};return u._pineFacadeAjax("POST","/parse_title/",r).done((function(e,r,t){e.error?n.reject(u._readableError(e.error)):e.success?n.resolve(e.result):n.reject(e.reason)})).fail((function(e){u._anyRequestAsyncFail(n,e)})),n.promise()},u.evalMetaInfoExprsAsync=function(e,n){i("Pine","ScriptLib.evalMetaInfoExprs");var r=$.Deferred(),t={username:window.user&&window.user.username,source:e,inputs:JSON.stringify(n||{})};return u._pineFacadeAjax("POST","/eval_pine_ex/",t).done((function(e,n,t){e.error?r.reject(u._readableError(e.error)):e.success?r.resolve(e.result):r.reject(e.reason)})).fail((function(e){u._anyRequestAsyncFail(r,e)})),r.promise()},u.patchPropertiesAsync=function(e,n,r){return a.logNormal("patchPropertiesAsync"),new Promise((function(i,s){if(n.TVScriptMetaInfoExprs){var a=n.TVScriptMetaInfoExprs.tree,o=n.TVScriptMetaInfoExprs.patchMap;u.evalMetaInfoExprsAsync(a,r).done((function(n){for(var r=n.rootValues,s=Object.keys(o),a=0;a<s.length;a++){var c=s[a],u=r[o[c]],l=c.split(".");"defaults"===l[0]&&l.splice(0,1),t(l.length>1,"Unexpectedly short json path");for(var p=e,d=0;d<l.length-1;++d)p=p[l[d]];p[l[l.length-1]].setValue(u)}i(e)})).fail((function(e){s(e)}))}else i(e)}))},u.scriptUpdater=function(){return window.scriptUpdater},u.clearAllCaches=function(){u.clearIsAuthToCaches(),u.clearSavedScriptsCache()},u.clearIsAuthToCaches=function(e){e?Object.keys(u._cache).filter((function(n){return n.indexOf(e)>=0})).forEach((function(e){delete u._cache[e]})):u._isAuthCache=new l},
u.clearSavedScriptsCache=function(e){delete u._userScriptsDfd},u.requestUserScripts=function(e){if(i("Pine","ScriptLib.requestUserScripts"),window.is_authenticated){if(!u._userScriptsDfd){u._userScriptsDfd=$.Deferred();var n=u._userScriptsDfd;u._pineFacadeAjax("GET","/list?filter=saved").done((function(e,r,t){n.resolve(e)})).fail((function(e){u._anyRequestAsyncFail(n,e)}))}n=u._userScriptsDfd}else n=$.Deferred().resolve([]);return"function"==typeof e&&n.done(e),n.promise()},u.setUserScripts=function(e){u._userScriptsDfd||(u._userScriptsDfd=$.Deferred().resolve(e))},u.requestUserPublishedScripts=function(e,n){if(i("Pine","ScriptLib.requestUserPublishedScripts"),window.is_authenticated){if(n||!u._userPublishedScriptsDfd){u._userPublishedScriptsDfd=$.Deferred();var r=u._userPublishedScriptsDfd;u._pineFacadeAjax("GET","/list?filter=published").done((function(e,n,t){r.resolve(e)})).fail((function(e){u._anyRequestAsyncFail(r,e)}))}r=u._userPublishedScriptsDfd}else r=$.Deferred().resolve([]);return"function"==typeof e&&r.done(e),r.promise()},u.requestPineEditorNewTemplateScripts=function(e){i("Pine","ScriptLib.requestPineEditorNewTemplateScripts");var n=$.Deferred();return u._pineFacadeAjax("GET","/list/?filter=template",void 0,!0).done((function(e,r,t){n.resolve(e)})).fail((function(e){u._anyRequestAsyncFail(n,e)})),"function"==typeof e&&n.done(e),n.promise()},u.requestInfoForScripts=function(e){return Promise.all([u._pineFacadeAjax("GET","/list?filter=saved"),u._pineFacadeAjax("GET","/list?filter=addon",void 0,!0)]).then((function(n){var r=n[0],t=n[1];return r.concat(t).filter((function(n){return e.includes(n.scriptIdPart)}))}))},u.requestBuiltinScripts=function(){i("Pine","ScriptLib.requestBuiltinScripts"),a.logNormal("Request built-in scripts");var e=$.Deferred();return u._pineFacadeAjax("GET","/list/?filter=standard",void 0,!0).done((function(n,r,t){a.logNormal("Request built-in scripts finished"),e.resolve(n)})).fail((function(n){a.logWarn("Request built-in scripts finished with fail"),u._anyRequestAsyncFail(e,n)})),e.promise()},u.requestBuiltinAndUserScripts=function(){i("Pine","ScriptLib.requestBuiltinAndUserScripts"),a.logNormal("Request built-in and user scripts");var e,n=window.user&&window.user.username,r={},t=new Promise((function(n,t){e=n,r.reject=t}));return Promise.all([u._pineFacadeAjax("GET","/list?filter=saved&user_name="+encodeURIComponent(n),void 0,!1),u._pineFacadeAjax("GET","/list?filter=standard",void 0,!0)]).then((function(n){a.logNormal("Request built-in and user scripts finished");var r=n[0],t=n[1];e(r.concat(t))})).catch((function(e){a.logWarn("Request built-in and user scripts finished with fail"),u._anyRequestAsyncFail(r,e)})),t},u.requestCandlestickScripts=function(){var e;i("Pine","ScriptLib.requestCandlestickScripts"),a.logNormal("Request candlestick scripts");var n={},r=new Promise((function(r,t){e=r,n.reject=t}));return u._pineFacadeAjax("GET","/list?filter=candlestick",void 0,!0).done((function(n){a.logNormal("Request candlestick scripts finished"),e(n)})).fail((function(e){
a.logWarn("Request candlestick scripts finished with fail"),u._anyRequestAsyncFail(n,e)})),r};var p={time:-1/0,request:null};u.requestFundamentalScripts=function(){if(p.time+6e5>Date.now()&&null!==p.request)return a.logNormal("Return fundamentals from cache"),p.request;a.logNormal("Request fundamental scripts");var e=u._pineFacadeAjax("GET","/list?filter=fundamental",void 0,!1);return e.then((function(e){a.logNormal("Request fundamental scripts finished")})),e.fail((function(e){a.logWarn("Request fundamental scripts finished with fail, resetting cache"),p.request=null})),p.time=Date.now(),p.request=Promise.resolve(e.promise()),p.request},u.requestPineAddons=function(e){i("Pine","ScriptLib.requestPineAddons");var n=$.Deferred();return u._pineFacadeAjax("GET","/list?filter=addon&pine_id_prefix="+e).done((function(e){n.resolve(e)})).fail((function(e){u._anyRequestAsyncFail(n,e)})),n},u._updateAliveScriptInstances=function(e,n){var r={};r.scriptMetaInfo=e.result.metaInfo,r.scriptVersionToUpdate=n,s.emit("TVScriptModified",JSON.stringify(r)),setTimeout((function(){r.isSelfCall=!0,null!=u.scriptUpdater()&&u.scriptUpdater().onTVScriptModified(r)}),0)},u.saveNew=function(e,n,r,t){i("Pine","ScriptLib.saveNew");var s=$.Deferred();if(null==e||""===e)return s.reject($.t("Cannot save empty source code"));var a=window.user&&window.user.username,o=r?"&allow_overwrite=true":"",c="/save/new/?name="+encodeURIComponent(n)+"&user_name="+encodeURIComponent(a)+o,l={source:e};return u._pineFacadeAjax("POST",c,l).done((function(e,n,r){u.clearSavedScriptsCache(),u._updateAliveScriptInstances(e,t),u._saveScriptAsyncDone(s,e)})).fail((function(e,n,r){u._anyRequestAsyncFail(s,e)})),s.promise()},u.saveNext=function(e,n,r,t,s){i("Pine","ScriptLib.saveNext");var a=null!=r?"&name="+encodeURIComponent(r):"",o=$.Deferred();if(null==n||""===n)return o.reject($.t("Cannot save empty source code"));var c=window.user&&window.user.username,l="/save/next/"+encodeURIComponent(e)+"/?user_name="+encodeURIComponent(c)+"&allow_create_new="+!!s+a,p={source:n};return u._pineFacadeAjax("POST",l,p).done((function(e,n,r){u.clearSavedScriptsCache(),u._updateAliveScriptInstances(e,t),u._saveScriptAsyncDone(o,e)})).fail((function(e,n,r){u._anyRequestAsyncFail(o,e)})),o.promise()},u.deletePine=function(e){i("Pine","ScriptLib.deletePine");var n=$.Deferred(),r=window.user&&window.user.username,t="/delete/"+encodeURIComponent(e)+"/?user_name="+encodeURIComponent(r);return u._pineFacadeAjax("POST",t).done((function(r,t,i){u.clearIsAuthToCaches(e),u.clearSavedScriptsCache(),n.resolve(r);var a={scriptIdPart:e};s.emit("TVScriptDeleted",JSON.stringify(a)),setTimeout((function(){a.isSelfCall=!0,null!=u.scriptUpdater()&&u.scriptUpdater().onTVScriptDeleted(a),u._pineDeleted.fire(e)}),0)})).fail((function(e,r,t){u._anyRequestAsyncFail(n,e)})),n.promise()},u.renamePine=function(e,n,r){i("Pine","ScriptLib.renamePine")
;var t=$.Deferred(),a=window.user&&window.user.username,o="/rename/"+encodeURIComponent(e)+"/?name="+encodeURIComponent(n)+"&user_name="+encodeURIComponent(a)+"&force="+encodeURIComponent(!!r);return u._pineFacadeAjax("POST",o).done((function(r,i,a){u.clearSavedScriptsCache();var o={scriptIdPart:e,scriptName:n};s.emit("TVScriptRenamed",JSON.stringify(o)),setTimeout((function(){o.isSelfCall=!0,null!=u.scriptUpdater()&&u.scriptUpdater().onTVScriptRenamed(o)}),0),t.resolve(r)})).fail((function(e,n,r){u._anyRequestAsyncFail(t,e)})),t.promise()},u.publishNew=function(e,n){i("Pine","ScriptLib.publishNew");var r=$.Deferred(),t=window.user&&window.user.username,s="/publish/new/?access="+encodeURIComponent(n)+"&user_name="+encodeURIComponent(t),a={source:e};return u._pineFacadeAjax("POST",s,a).done((function(e,n,t){u.clearSavedScriptsCache(),r.resolve(e)})).fail((function(e,n,t){u._anyRequestAsyncFail(r,e)})),r.promise()},u.publishNext=function(e,n){a.logNormal("ScriptLib.publishNext","pine"),i("Pine","ScriptLib.publishNext");var r=$.Deferred(),t=window.user&&window.user.username,s="/publish/next/"+encodeURIComponent(n)+"?user_name="+encodeURIComponent(t),o={source:e};return u._pineFacadeAjax("POST",s,o).done((function(e,n,t){u.clearSavedScriptsCache(),e.success||r.reject(e.reason),r.resolve(e)})).fail((function(e,n,t){u._anyRequestAsyncFail(r,e)})),r.promise()},loginStateChange.subscribe(u,u.clearAllCaches),e.exports=u}).call(this,r("aIyQ"))}}]);