(window.webpackJsonp=window.webpackJsonp||[]).push([["conversion"],{"6waE":function(e,n,t){"use strict";t.r(n),t.d(n,"showBanner",(function(){return o})),t.d(n,"fill",(function(){return i}));var a=t("mrSG"),r=(t("bSeV"),t("eI3D"));function o(e,n){return Object(a.b)(this,void 0,void 0,(function(){return Object(a.d)(this,(function(a){switch(a.label){case 0:return[4,Promise.all([t.e("vendors"),t.e(2),t.e(77),t.e(210),t.e(15),t.e(28),t.e(74),t.e("six-months-banner")]).then(t.bind(null,"iMeb"))];case 1:return a.sent().renderBanner(e,n),[2]}}))}))}function i(){var e,n,t=document.querySelector(".js-six-months-area"),a=null===(n=null===(e=window.user.available_offers)||void 0===e?void 0:e[r.OFFERS.six_months])||void 0===n?void 0:n.expire_on;t&&a&&o(t,{expiration:a}).then((function(){t.classList.remove("js-hidden")}))}},"8CjT":function(e,n,t){"use strict";t.r(n),t.d(n,"showEarlyBirdDialog",(function(){return r}));var a=t("mrSG");function r(e){return Object(a.b)(this,void 0,void 0,(function(){return Object(a.d)(this,(function(n){switch(n.label){case 0:return[4,Promise.all([t.e("vendors"),t.e(1),t.e(2),t.e(20),t.e(77),t.e(592),t.e(15),t.e(28),t.e(74),t.e("early-bird-dialog")]).then(t.bind(null,"igN3"))];case 1:return n.sent().renderEarlyBirdDialog(e),[2]}}))}))}},JHm1:function(e,n,t){"use strict";var a;t.r(n),t.d(n,"TrialTokenStates",(function(){return a})),function(e){e.Started="started",e.Week1="after 1 week",e.Week2="after 2 weeks",e.Week3="after 3 weeks",e.Week4="after 4 weeks",e.Finished="finished"}(a||(a={}))},LRfD:function(e,n,t){"use strict";t.r(n),t.d(n,"getLastChanceExpiration",(function(){return o})),t.d(n,"showLastChanceBanner",(function(){return i})),t.d(n,"fill",(function(){return s}));var a=t("mrSG"),r=t("eI3D");function o(){var e,n;return null===(n=null===(e=window.user.available_offers)||void 0===e?void 0:e[r.OFFERS.last_chance])||void 0===n?void 0:n.expire_on}function i(e,n){return Object(a.b)(this,void 0,void 0,(function(){return Object(a.d)(this,(function(a){switch(a.label){case 0:return[4,Promise.all([t.e("vendors"),t.e(2),t.e(77),t.e(210),t.e(15),t.e(28),t.e(74),t.e("last-chance-banner")]).then(t.bind(null,"kEC6"))];case 1:return a.sent().renderLastChanceBanner(e,n),[2]}}))}))}function s(){var e=document.querySelector(".js-last-chance-area"),n=o();e&&n&&i(e,{expiration:n}).then((function(){e.classList.remove("js-hidden")}))}},Qrgc:function(e,n,t){"use strict";t.d(n,"a",(function(){return o})),t.d(n,"b",(function(){return i}));var a=t("eI3D");function r(e){return e.length>0?e.sort((function(e,n){return n-e}))[0]:null}function o(e){return r(Object.values(e.products).map((function(e){return e.product.discount.discount_percent||0})))}function i(e){var n=[];for(var t in e)if(e.hasOwnProperty(t))if(t===a.OFFERS.early_access&&void 0!==e.early_access){var i=o(e.early_access);null!==i&&n.push(i)}else if(t!==a.OFFERS.trial){var s=e[t];void 0!==s&&"product"in s&&void 0!==s.product.discount.discount_percent&&n.push(s.product.discount.discount_percent)}return r(n)}},Uohu:function(e,n,t){"use strict";t.r(n),
t.d(n,"getEarlyAccessDiscount",(function(){return c})),t.d(n,"visitEarlyAccessPaymentPage",(function(){return d})),t.d(n,"showEarlyBirdBanner",(function(){return f})),t.d(n,"fill",(function(){return p}));var a=t("mrSG"),r=(t("bSeV"),t("T7XC")),o=t("KuNA"),i=t("Qrgc"),s=t("FfBj"),u=t("fsuG"),l=t("eI3D");function c(){return window.user&&window.user.available_offers&&window.user.available_offers.early_access?Object(i.a)(window.user.available_offers.early_access):null}function d(e,n,t){void 0===t&&(t={}),e=e||o.ProPlans.ProRealtime,(n=n||c())&&(e="{0}_{1}{2}".format(e,n,s.EA_SUFFIX)),Object(u.visitPaymentPage)(e,r.BillingCycle.OneYear,{fixedCycle:!1,paymentMethod:t.paymentMethod})}function f(e,n){return Object(a.b)(this,void 0,void 0,(function(){return Object(a.d)(this,(function(a){switch(a.label){case 0:return[4,Promise.all([t.e("vendors"),t.e(2),t.e(77),t.e(210),t.e(15),t.e(28),t.e(74),t.e("early-bird-banner")]).then(t.bind(null,"wP7s"))];case 1:return a.sent().renderEarlyBirdBanner(e,n),[2]}}))}))}function p(e){var n,t=document.querySelector(".js-early-access-area"),a=c(),r=window.user.available_offers?null===(n=window.user.available_offers[l.OFFERS.early_access])||void 0===n?void 0:n.expire_on:void 0;t&&a&&r&&f(t,{discount:a,onButtonClick:e,expiration:r}).then((function(){t.classList.remove("js-hidden")}))}},V9Ec:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.trialMessageSuccessDialog=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(n){Promise.all([t.e("vendors"),t.e("dialogs-core"),t.e(11),t.e(18),t.e(26),t.e(30),t.e(36),t.e(555),t.e(35),t.e(34),t.e(296),t.e("trial-message-success-dialog")]).then(function(a){n(t("qNxe").trialMessageSuccessDialog(e))}.bind(null,t)).catch(t.oe)}))}},bYLp:function(e,n,t){"use strict";t.r(n),t.d(n,"showSixMonthsDialog",(function(){return r}));var a=t("mrSG");function r(e){return Object(a.b)(this,void 0,void 0,(function(){return Object(a.d)(this,(function(n){switch(n.label){case 0:return[4,Promise.all([t.e("vendors"),t.e(1),t.e(2),t.e(9),t.e(20),t.e(77),t.e(600),t.e(15),t.e(28),t.e(74),t.e("six-months-dialog")]).then(t.bind(null,"MjWQ"))];case 1:return n.sent().renderSixMonthsDialog(e),[2]}}))}))}},fyFw:function(e,n,t){"use strict";t.r(n),t.d(n,"startFreeTrialDialog",(function(){return r}));var a=t("+GxX");function r(e){return Object(a.isFeatureEnabled)("braintree-trial-implementation")?Promise.all([t.e("vendors"),t.e(2),t.e(6),t.e(8),t.e(9),t.e(12),t.e(16),t.e(19),t.e(25),t.e(30),t.e(49),t.e(55),t.e(67),t.e(68),t.e(92),t.e(94),t.e(129),t.e(110),t.e(161),t.e(174),t.e(197),t.e(213),t.e(594),t.e(7),t.e(15),t.e(21),t.e(24),t.e(28),t.e(39),t.e(40),t.e(41),t.e(53),t.e(54),t.e(66),t.e(136),t.e(115),t.e(171),t.e(190),t.e(310),t.e("start-free-trial-bt-impl")]).then(t.bind(null,"NKy4")).then((function(n){(0,n.showStartFreeTrialDialog)(e)
})):Promise.all([t.e("vendors"),t.e(2),t.e(6),t.e(8),t.e(12),t.e(25),t.e(26),t.e(36),t.e(49),t.e(55),t.e(68),t.e(69),t.e(92),t.e(107),t.e(108),t.e(94),t.e(125),t.e(161),t.e(197),t.e(213),t.e(381),t.e(595),t.e(7),t.e(21),t.e(24),t.e(35),t.e(53),t.e(98),t.e(100),t.e(136),t.e(144),t.e(147),t.e(190),t.e(314),t.e("start-free-trial-impl")]).then(t.bind(null,"f2yZ")).then((function(n){(0,n.showStartFreeTrialDialog)(e)}))}},gzSH:function(e,n,t){"use strict";var a=t("YFKU"),r=t("VVxS").TVLocalStorage,o=t("V9Ec").trialMessageSuccessDialog,i=t("fyFw").startFreeTrialDialog,s=t("moLg").getEarlyBirdDialogDay,u=t("8CjT").showEarlyBirdDialog,l=t("bYLp").showSixMonthsDialog,c=t("qtrt").blackFridayDialog,d=t("24R9").getUrlParams,f=t("fsuG").visitPaymentPage,p=t("JWMC").trackEvent,h=t("FfBj"),_=t("Uohu").fill,w=t("LRfD").fill,v=t("sdz4").fill,b=t("6waE").fill,g=t("Uohu").visitEarlyAccessPaymentPage,m=t("Uohu").getEarlyAccessDiscount,y=t("Vdly"),k=t("eI3D").OFFERS,S=t("JHm1").TrialTokenStates,D=(t("NNtz"),t("BHQF").fetch),P=t("KuNA").ProPlans,F=t("T7XC").BillingCycle,O=t("0UyP").getTracker,x=t("qFKp").onGoPro,T=t("qFKp").onOrder,C=t("oOPW").createGoProDialog;function E(){this._inited=!1}var j=new E;E.prototype.init=function(){if(!this._inited)return this._inited=!0,L(),!0};var B=a.t("Now you have even more tools and features to make your trading successful."),V=a.t("Your trial was successfully downgraded. You can always upgrade again to a more powerful plan before it runs out."),M=a.t("The amount charged at the end of the trial (if you donâ€™t cancel) also reflects the new plan."),R="<p>"+B+"</p><p><span>"+M+"</span></p>",W="<p>"+V+"</p><p><span>"+M+"</span></p>",L=function(){function e(e){p("ProRT trial",e)}function n(e,n){return function(e){var n=$.Deferred();e=e||{};var r=new FormData;return r.append("product_id",e.product_id),D("/trial/change/",{method:"POST",credentials:"include",headers:new Headers({acccept:"application/json","X-Requested-With":"XMLHttpRequest"}),body:r}).then((function(e){return e.json()})).then((function(r){!function(e,n){if(!e.code)return!1;var r,o=h.humanizeProPlan(n.product_id),i="",s=a.t("{0} Trial").format(o),u=a.t("Sorry, {0} trial could not be set.").format(o),l=a.t("Close",{context:"input"});switch(e.code){case"user_has_product":i=E(a.t("You already have {0} trial.").format(o),u);break;case"trial_failed":i=E(a.t("You are already PRO. {0} trial cannot be activated on PRO accounts.").format(o),u);break;case"unable_find_order":case"unable_change_trial":case"unable_update_subscription":i=E(a.t("We were unable to change your subscription plan to {0}. Please try again.").format(o),a.t("Something went wrong."));break;case"user_not_on_trial":i=E(a.t("Wrong product for trial"),u);break;case"trial_not_available":s=a.t("Trial is not available",{context:"prohibited_trial"}),i=E(a.t("A trial could not be applied to this account. You can purchase a plan to take advantage of extra features.")),l=a.t("Pay now",{context:"prohibited_trial"}),r=function(){f(n.product_id,F.OneYear,{paymentMethod:"paypal"})}}
return Promise.all([t.e("vendors"),t.e("dialogs-core"),t.e(11),t.e(18),t.e(26),t.e(30),t.e(36),t.e(35),t.e(34),t.e("warning-dialog")]).then(function(e){var n=(0,t("eD2p").warningDialog)({title:s,content:i,closeButtonText:l}).open();r&&n.on("action:no",r)}.bind(null,t)).catch(t.oe),!0}(r,e)?n.resolve():n.reject()})),n.promise()}({product_id:e}).done((function(){o({title:a.t("Congrats! Your new trial is setup"),content:n||R}).then((function(e){e.on("afterClose",(function(){TradingView.onChartPage||location.reload()}))}))}))}function E(e,n){return n&&(n="<p>"+n+"</p>"),"<div>"+(n||"")+(e?"<p>"+e+"</p>":"")+"</div>"}function B(e){e=e||{},is_authenticated&&function(e){var n={startTrial:(e=e||{}).product_id,billingCycle:e.billing_cycle};window.TVDialogs&&window.TVDialogs.signModal?window.TVDialogs.signModal.on("afterClose",(function(){i(n)})):i(n)}(e)}function V(n){var t=function(){var t=(n=n||{}).discount=n.discount||m();if(user.is_trial&&t&&!T()&&!x()){var a=user.available_offers[k.early_access],r=n.trialDaysPassed||void 0!==a&&a.trial_days_passed,o=function(e,n){return"early_bird_dialog_"+s(e,n)}(n.state,r),i={state:n.state,trialDaysPassed:r,discount:t,actionHref:"/gopro/?source=early_bird_dialog&feature=show_options",onActionClick:function(){A(o,"accept",window.user.id),runOrSignIn((function(){M("popup with discount: {0}%".format(t))}),{source:"Early access trial dialog"})},onClose:function(){A(o,"decline",window.user.id),n.onDecline?n.onDecline():function(n){e("Offer declined with discount: {0}%".format(n)),L()}(t)},root:document.createElement("div")};u(i),A(o,"open",window.user.id),e(n.ga_shown_msg||"Early access dialog shown with {0}% discount".format(t))}};"undefined"!=typeof pro?pro.runOrUpdate(t):t()}function M(n){L(),e("GoPro after trial: {0}".format(n))}function L(){$.get("/accounts/update-trial-marker/"),window.user&&user.available_offers&&user.available_offers[k.early_access]&&delete user.available_offers[k.early_access].offer_state}function A(e,n,t){O().then((function(a){null!==a&&a.trackPermissionDialog(e,n,(t||"").toString())}))}function U(){var e;is_authenticated&&user.is_trial&&TradingView.setTrialAvailiable(!1),function(){if(window.is_authenticated&&window.user&&window.user.available_offers&&window.user.available_offers[k.early_access]){var e=m();_((function(){M("from billing page with discount: {0}%".format(e))}));var n=window.user.available_offers[k.early_access];if(n.actual_state){switch(n.offer_state){case S.Week1:case S.Week2:case S.Week3:case S.Week4:case S.Finished:V({state:n.offer_state})}delete n.offer_state}}}(),function(){var e=user.available_offers&&user.available_offers[k.six_months],n="six_months_dialog_last_day";if(is_authenticated&&e&&(b(),!T()&&!x())){if(!y.getValue("six_months.last_day_shown_popup")){var t=new Date(1e3*(e.expire_on-86400));if(new Date>t)return l({actionHref:"/gopro/?source=six_months_last_day_popup&feature=show_options",onActionClick:function(){A(n,"accept",window.user.id)},onClose:function(){A(n,"decline",window.user.id)},root:document.createElement("div")}),
y.setValue("six_months.last_day_shown_popup",1,{forceFlush:!0}),void A(n,"open",window.user.id)}if(!y.getValue("six_months.week_shown_popup")){t=new Date(1e3*(e.expire_on-1987200));new Date>t&&(C({feature:"SixMonths",actions:[{text:a.t("Explore offer"),onClick:function(){window.open("/gopro/?source=six_months_first_week_popup&feature=show_options","_blank")}}]}),y.setValue("six_months.week_shown_popup",1,{forceFlush:!0}))}}}(),function(){var e=user.available_offers&&user.available_offers[k.upgrade];if(is_authenticated&&e&&e.last_payment_date){if(!d().upgrade_popup){if(y.getValue("upgrade.shown_popup"))return;var n=new Date(1e3*e.last_payment_date);const t=Math.abs(new Date-n);if(Math.ceil(t/864e5)<30)return}C({feature:"upgradeNotification",actions:[{text:a.t("Show my options"),onClick:function(){window.open("/gopro/?source=upgrade_info_popup&feature=show_options","_blank")}}]}),y.setValue("upgrade.shown_popup",1,{forceFlush:!0})}}(),e=user.available_offers&&user.available_offers[k.last_chance],x()||T()||is_authenticated&&e&&(w(),y.getValue("lastChance.shown_popup")||(C({feature:"LastChance",actions:[{text:a.t("Explore special offers"),onClick:function(){window.open("/gopro/?source=last_chance_info_popup&feature=show_options","_blank")}}]}),y.setValue("lastChance.shown_popup",1,{forceFlush:!0}))),function(){var e=user.available_offers&&user.available_offers[k.one_usd];x()||T()||is_authenticated&&e&&(v(),y.getValue("oneUsd.shown_popup")||(C({feature:"oneUsd",actions:[{text:a.t("Upgrade Now"),onClick:function(){window.open("/gopro/?source=one_usd_info_popup&feature=upgrade_now","_blank")}}]}),y.setValue("oneUsd.shown_popup",1,{forceFlush:!0})))}();const n=user.available_offers[k.black_friday]||{},t=user.available_offers[k.cyber_monday]||{};(n.show_popup||t.show_popup)&&c(user.available_offers)}var N=!1;function q(){var e=r.getItem("trial_availiable");return null!=e&&1==+e}return j.startTrial=function(e){var n={product_id:P.ProRealtime,billing_cycle:F.Monthly};Object.assign(n,e||{}),runOrSignIn(B.bind(this,n),{mode:"signup",source:"before_start_trial",verifiedPhoneRequired:!0,doNotCheckSocialActivity:!0,doNotCheckSuspicious:!0,doNotShowConfirmation:!0})},j.earlyAccessDialog=V,j.changeTrial=n,j.upgradeTrial=function(e){return n(e,R)},j.downgradeTrial=function(e){return n(e,W)},j.isTrialAvailable=q,j.openEarlyAccessPaymentPage=function(n){var t;g((n=n||{}).product_id,n.discount,{paymentMethod:n.paymentMethod}),t=n.reason,L(),e("Order after trial: {0}".format(t))},function(){if(N)return!1;N=!0;var e=function(){var e=$(document.documentElement);window.is_authenticated&&q()?e.addClass("is-trial-available").removeClass("is-not-trial-available"):e.addClass("is-not-trial-available").removeClass("is-trial-available")};loginStateChange.subscribe(null,(function(n){n||e()})),e(),$(U)}}();e.exports=j},moLg:function(e,n,t){"use strict";t.r(n),t.d(n,"getEarlyBirdDialogDay",(function(){return r}));var a=t("JHm1");function r(e,n){switch(e){case a.TrialTokenStates.Week1:return"7";case a.TrialTokenStates.Week2:return"14"
;case a.TrialTokenStates.Week3:return"21";case a.TrialTokenStates.Week4:case a.TrialTokenStates.Finished:return 28===n?"28":"30";default:return null}}},qtrt:function(e,n,t){"use strict";t.r(n),t.d(n,"blackFridayDialog",(function(){return o}));var a=t("Vdly"),r=t("eI3D");function o(e){var n=r.OFFERS.cyber_monday in e?r.OFFERS.cyber_monday:r.OFFERS.black_friday;if(a.getBool(n+".shown_popup_2020"))return Promise.resolve();var o=e[r.OFFERS.cyber_monday];return o&&(1e3*o.date_end-Date.now())/864e5>1||["","black-friday","order","jobs","gopro","paypal"].includes(window.location.pathname.split("/")[1])?Promise.resolve():Promise.all([t.e("vendors"),t.e(2),t.e("dialogs-core"),t.e(11),t.e(18),t.e(26),t.e(30),t.e(36),t.e(77),t.e(383),t.e(463),t.e(35),t.e(34),t.e(74),t.e("blackfriday-dialog-impl")]).then(t.bind(null,"/eS7")).then((function(e){(0,e.showBlackFridayDialog)().on("afterClose",(function(){a.setValue(n+".shown_popup_2020",!0,{forceFlush:!0})}))}))}},sdz4:function(e,n,t){"use strict";t.r(n),t.d(n,"showOneUsdBanner",(function(){return o})),t.d(n,"fill",(function(){return i}));var a=t("mrSG"),r=t("eI3D");function o(e,n){return Object(a.b)(this,void 0,void 0,(function(){return Object(a.d)(this,(function(a){switch(a.label){case 0:return[4,Promise.all([t.e("vendors"),t.e(2),t.e(77),t.e(210),t.e(15),t.e(28),t.e(74),t.e("one-usd-banner")]).then(t.bind(null,"4BPD"))];case 1:return a.sent().renderOneUsdBanner(e,n),[2]}}))}))}function i(){var e,n=document.querySelector(".js-one-usd-area"),t=window.user.available_offers?null===(e=window.user.available_offers[r.OFFERS.one_usd])||void 0===e?void 0:e.expire_on:void 0;n&&o(n,{expiration:t}).then((function(){n.classList.remove("js-hidden")}))}}}]);